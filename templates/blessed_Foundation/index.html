{% extends 'Base.html' %}
{% load static %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section position-relative vh-100 overflow-hidden">
  <div class="hero-content position-absolute top-50 start-50 translate-middle text-center text-white z-1">
    <div class="container" style="max-width: 900px;">
      <h1 class="hero-title display-1 text-capitalize mb-4 fw-bold">THE BLESSED FOUNDATION</h1>
      <div class="d-flex justify-content-center gap-3">
        <a href="{% url 'Paiement:donation' %}" class="btn btn-primary btn-lg px-4 px-md-5">Donate</a>
        <a href="{% url 'Foundation:adherer' %}" class="btn btn-primary btn-lg px-4 px-md-5">Join With Us</a>
      </div>
    </div>
  </div>

  <!-- Responsive Carousel -->
  <div id="mainCarousel" class="carousel slide h-100" data-bs-ride="carousel">
    <div class="carousel-inner h-100">
      <div class="carousel-item active h-100">
        <picture>
          <!-- WebP versions -->
          <source media="(min-width: 992px)" srcset="{% static 'img/home-large.webp' %}" type="image/webp">
          <source srcset="{% static 'img/home-mobile.webp' %}" type="image/webp">
          <!-- Fallbacks -->
          <source media="(min-width: 992px)" srcset="{% static 'img/home-large.jpg' %}">
          <img src="{% static 'img/home-mobile.jpg' %}" 
               alt="Blessed Foundation helping community" 
               class="img-fluid w-100 h-100 object-fit-cover"
               loading="eager"
               width="1920" 
               height="1080">
        </picture>
      </div>
    </div>
  </div>
</section>

<!-- Mission Section -->
<section class="mission-section py-5" style="background-color: rgba(37, 67, 54, 0.9);">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-lg-8">
        <p class="mission-statement text-white fs-4 text-uppercase fw-bold mb-0">
          Blessed foundation was created in democratic republic of Congo in 2019 to support orphans, 
          widows, disadvantaged children and women who take sole parental responsibilities
        </p>
        <hr class="my-4 bg-white" style="width: 150px; opacity: 1;">
      </div>
    </div>

    <div class="row g-4 mt-3">
      <div class="col-md-6">
        <div class="h-100 p-5 text-white">
          <h2 class="text-white text-uppercase mb-4">Help family</h2>
          <figure class="mb-4">
            <blockquote class="blockquote fw-bold fs-3">
              <p>"Family means no one gets left behind or forgotten"</p>
            </blockquote>
            <figcaption class="blockquote-footer text-white-50 mt-2">
              David Ogden Stiers
            </figcaption>
          </figure>
          <a href="{% url 'Paiement:donation' %}" class="btn btn-primary px-4 py-2 mt-3">Donate Now</a>
        </div>
      </div>
      
      <div class="col-md-6">
        <div class="card border-success h-100">
          <div class="card-body d-flex flex-column">
            <h3 class="card-title text-success mb-3">Sponsor a Child</h3>
            <p class="card-text flex-grow-1">
              Support underprivileged children through educational opportunities and holistic development programs.
            </p>
            <a href="{% url 'Foundation:partenaire' %}" class="btn btn-primary align-self-start mt-auto">Become a Sponsor</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Focus Areas Section -->
<section class="focus-areas py-5 bg-light">
  <div class="container py-5">
    <header class="text-center mb-5">
      <h2 class="text-uppercase text-success mb-3">Our Focus Areas</h2>
      <h1 class="display-5 fw-bold">Building a Sustainable Future</h1>
    </header>

    <div class="row g-4">
      {% for area in focus_areas %}
      <div class="col-md-4">
        <article class="focus-card h-100 bg-white p-4 rounded-3 shadow-sm">
          <div class="focus-img-wrapper mb-4">
            <picture>
              <source srcset="{{ area.image_webp.url }}" type="image/webp">
              <img src="{{ area.image.url }}" 
                   alt="{{ area.title }}" 
                   class="img-fluid w-100 rounded-3"
                   loading="lazy"
                   width="400"
                   height="300">
            </picture>
          </div>
          <h3 class="h4 mb-3">{{ area.title }}</h3>
          <p class="mb-4">{{ area.description }}</p>
          <a href="{{ area.link }}" class="btn btn-outline-success">Learn More</a>
        </article>
      </div>
      {% endfor %}
    </div>
  </div>
</section>

<!-- Donation Impact Section -->
<section class="impact-section py-5">
  <div class="container py-5">
    <header class="text-center mb-5">
      <h2 class="text-uppercase text-success">Make an Impact</h2>
      <h1 class="display-5 fw-bold">Your donation changes lives</h1>
    </header>

    <div class="row g-4">
      {% for cause in donation_causes %}
      <div class="col-lg-4">
        <div class="impact-card h-100 overflow-hidden rounded-3 shadow">
          <picture>
            <source srcset="{{ cause.image_webp.url }}" type="image/webp">
            <img src="{{ cause.image.url }}" 
                 alt="{{ cause.title }}" 
                 class="img-fluid w-100"
                 loading="lazy"
                 width="400"
                 height="300">
          </picture>
          
          <div class="impact-content p-4 bg-dark text-white">
            <h3 class="h5 text-uppercase text-success">{{ cause.category }}</h3>
            <h4 class="h3 mb-3">{{ cause.title }}</h4>
            <p class="mb-4">{{ cause.description }}</p>
            
            <div class="progress mb-3" style="height: 8px;">
              <div class="progress-bar bg-success" 
                   role="progressbar" 
                   style="width: {{ cause.progress }}%;"
                   aria-valuenow="{{ cause.progress }}" 
                   aria-valuemin="0" 
                   aria-valuemax="100">
              </div>
            </div>
            
            <div class="d-flex justify-content-between mb-3">
              <span>Raised: ${{ cause.raised }}</span>
              <span>Goal: ${{ cause.goal }}</span>
            </div>
            
            <a href="{% url 'Paiement:donation' %}" class="btn btn-success w-100">Donate Now</a>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</section>

<!-- Stats Counter -->
<section class="stats-section py-5" style="background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url({% static 'img/impact-bg.webp' %}) center/cover;">
  <div class="container py-5 text-center text-white">
    <h2 class="text-uppercase text-success mb-5">Our Impact in Numbers</h2>
    
    <div class="row g-4">
      {% for stat in stats %}
      <div class="col-md-6 col-lg-3">
        <div class="stat-card p-4 border border-white rounded-3">
          <i class="{{ stat.icon }} fa-3x mb-3"></i>
          <h3 class="h2 fw-bold">{{ stat.number }}{% if stat.plus %}+{% endif %}</h3>
          <p class="mb-0">{{ stat.label }}</p>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</section>

<!-- Testimonials -->
<section class="testimonials py-5 bg-light">
  <div class="container py-5">
    <h2 class="text-center text-uppercase text-success mb-5">Stories of Hope</h2>
    
    <div id="testimonialsCarousel" class="carousel slide" data-bs-ride="carousel">
      <div class="carousel-inner">
        {% for story in stories %}
        <div class="carousel-item {% if forloop.first %}active{% endif %}">
          <div class="testimonial-card mx-auto bg-white p-5 rounded-3 shadow-sm" style="max-width: 800px;">
            <blockquote class="mb-4 fs-5">
              "{{ story.quote }}"
            </blockquote>
            <footer class="text-muted">â€” {{ story.author }}</footer>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>
</section>

<!-- Campaigns -->
<section class="campaigns py-5">
  <div class="container">
    <div class="row align-items-end mb-5">
      <div class="col-md-4">
        <h2 class="text-uppercase text-success">Current Campaigns</h2>
        <h3 class="display-6 fw-bold">Join our initiatives</h3>
      </div>
      
      <div class="col-md-8">
        <div id="campaignsCarousel" class="carousel slide" data-bs-ride="carousel">
          <div class="carousel-inner">
            {% for campaign in campaigns %}
            <div class="carousel-item {% if forloop.first %}active{% endif %}">
              <div class="campaign-card">
                <picture>
                  <source srcset="{{ campaign.image_webp.url }}" type="image/webp">
                  <img src="{{ campaign.image.url }}" 
                       alt="{{ campaign.title }}" 
                       class="img-fluid rounded-top"
                       loading="lazy"
                       width="800"
                       height="450">
                </picture>
                
                <div class="campaign-body p-4 border border-top-0 rounded-bottom">
                  <h4 class="mb-3">{{ campaign.title }}</h4>
                  <p class="mb-4">{{ campaign.description|truncatewords:30 }}</p>
                  
                  <div class="d-flex justify-content-between align-items-center">
                    <div>
                      <span class="d-block text-success fw-bold">${{ campaign.raised }}</span>
                      <small class="text-muted">Raised of ${{ campaign.goal }}</small>
                    </div>
                    <a href="{{ campaign.url }}" class="btn btn-sm btn-success">Support</a>
                  </div>
                </div>
              </div>
            </div>
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Volunteer CTA -->
<section class="volunteer-cta py-5 bg-success text-white">
  <div class="container py-5">
    <div class="row align-items-center">
      <div class="col-lg-5 mb-5 mb-lg-0">
        <div class="row g-4">
          {% for volunteer in team_members %}
          <div class="col-6">
            <div class="team-card position-relative overflow-hidden rounded-3">
              <picture>
                <source srcset="{{ volunteer.image_webp.url }}" type="image/webp">
                <img src="{{ volunteer.image.url }}" 
                     alt="{{ volunteer.name }}" 
                     class="img-fluid w-100"
                     loading="lazy"
                     width="300"
                     height="400">
              </picture>
              <div class="team-overlay p-3">
                <h5 class="mb-1">{{ volunteer.name }}</h5>
                <small>{{ volunteer.role }}</small>
              </div>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
      
      <div class="col-lg-7">
        <h2 class="text-uppercase mb-4">Ready to make a difference?</h2>
        <h3 class="display-5 fw-bold mb-4">Join our volunteer team</h3>
        
        <ul class="list-unstyled mb-5">
          {% for benefit in volunteer_benefits %}
          <li class="mb-2">
            <i class="fas fa-check-circle me-2"></i> {{ benefit }}
          </li>
          {% endfor %}
        </ul>
        
        <a href="{% url 'Foundation:adherer' %}" class="btn btn-light btn-lg px-4">Join Us Today</a>
      </div>
    </div>
  </div>
</section>
{% endblock %}